- [树](#树)
- [树的遍历](#树的遍历)
- [树的存储结构](#树的存储结构)
- [二叉树](#二叉树)
- [二叉树的遍历](#二叉树的遍历)
- [二叉树的存储结构](#二叉树的存储结构)
- [森林](#森林)
- [森林的遍历](#森林的遍历)
- [二叉树与树的转换](#二叉树与树的转换)
- [二叉树与森林的转换](#二叉树与森林的转换)
- [最优二叉树（哈夫曼树）](#最优二叉树哈夫曼树)
- [二叉查找树（又称二叉搜索树）](#二叉查找树又称二叉搜索树)
- [平衡二叉树（又称avl树，BT树）](#平衡二叉树又称avl树bt树)
- [B树（又称B-树）](#b树又称b-树)
- [字典树](#字典树)







##### 树

- 定义：是由n(n>=1)个有限结点组成一个具有层次关系的集合，是n个结点的有限集
  - 若n=0，则称为空树
  - 若n>0，则它满足如下两个条件
    - 有且仅有一个特定的称为根的结点
    - 其余结点可分为m个互不相交的有限集T1,T2,T3,...,Tm，其中每一个集合本身又是一棵树，并称为根的子树
  - 树的定义是一个递归的定义
- 有关树的基本概念：
  - 结点：数据元素以及指向子树的结点
    - 根结点：非空树中无前驱结点的结点
  - 结点的度：结点拥有的子树数
  - 树的度：树内各结点的度的**最大值**
    - 叶子：度数为0，终端结点
    - 非终端结点：度数不为0
  - 内部节点：根节点以外的分支结点
  - 结点的子树的根称为该结点的**孩子**，该节点称为该孩子的**双亲**
  - 同一个双亲是**兄弟**，而双亲在同一层结点的为**堂兄弟**
  - 结点的**祖先**：从根到该结点所经分支上的所有结点
  - 结点的**子孙**：以某节点为根的子树中的任一结点
  - 树的**深度**：树中结点的最大层次
  - 有序树：树中结点的各子树从左到右有次序（最左边的为第一个孩子），即子树的位置是不可以变换的
  - 无序树：树中结点的各子树无次序
- 树的结构
  - 根节点，只有一个，无双亲
  - 叶子节点（可以有多个），无孩子
  - 其他结点-中间结点，一个双亲，多个孩子







##### 树的遍历

- 先跟遍历
  - 若树不为空，则先访问根节点，然后依次先跟遍历各棵子树
- 后跟遍历
  - 若树不为空，则先依次后跟遍历各棵子树，然后先访问根节点
- 层次遍历
  - 若树不为空，则自上而下自左至右访问树中每个结点







##### 树的存储结构

- 双亲表示法
  - 实现：定义结构数组，存放树的结点，每个结点存放两个域
    - 数据域：存放结点信息
    - 双亲域：指示本结点的双亲结点在数组中的位置
  - 特点：找双亲容易，找孩子难
- 孩子链表表示法
  - 实现：把每个结点的孩子结点排列起来，看成是一个线性表，用单链表存储。则n个结点有n个孩子链表（叶子的孩子链表为空表），而n个头指针又组成一个线性表，用顺序表存储
  - 特点：找孩子容易，找双亲难
- 孩子兄弟表示法（二叉树表示法，二叉链表表示法）
  - 实现：用二叉链表作树的存储结构，链表中每个结点的两个指针域分别指向第一个孩子和下一个兄弟结点







##### 二叉树

- 出现的原因：
  - 结构最简单，规律性强
  - 可以证明，所有树都能转为唯一对应的二叉树，不失一般性
- 定义：是n(n>=0)个结点的有限集，它或者是空集（n=0），或者由一个根节点及两颗互不相交的分别称作这个根的左子树和右子树的二叉树组成
- 特点：
  - 每个结点最多有两个孩子
  - 子树是有左右之分的，次序不能颠倒（即为有序树）
    - 所以即使只有一颗子树，都要区分是左子树还是右子树
    - 对比树，树只有一个孩子的时候无需分辨是左还是右
    - 所以二叉树和树是两种不同的概念，但是树的基本术语对二叉树都是适用的
  - 二叉树是空集合，根可以有空的左子树或空的右子树
  - 二叉树的编号方式：从上到下，从左到右
- 性质：
  - 在二叉树的第i层上至多有2<sup>i-1</sup>个结点（i>=1）
    - 在第i层至少有1个结点
  - 深度为k的二叉树至多有2<sup>k</sup>-1个结点（k>=1）
    - 深度为k至少有k个结点
  - 对任何一颗二叉树T，如果其叶子数为n<sub>0</sub>，度为2的结点数为n<sub>2</sub>，则n<sub>0</sub>=n<sub>2</sub>+1
- 两种特殊的二叉树
  - **满二叉树**
    - 定义：一颗深度为k且有2<sup>k</sup>-1个结点的二叉树
    - 特点：
      - 每一层的结点数都是最大结点数（即每一层都满了）
      - 在顺序存储下能够复原
      - 叶子节点全部在最底层
      - 在同样深度的二叉树中**结点个数最多**，**叶子结点个数最多**
  - **完全二叉树**
    - 定义：深度为k的具有n个结点的二叉树，当且仅当其每一个结点都与深度为k的满二叉树中的编号为1-n的结点一一对应
    - 特点：
      - 在满二叉树中，从最后一个结点开始，**连续**去掉**任意**个结点，即是一颗完全二叉树
      - 叶子只可能分布在层次最大的两层上
      - 对任一结点，如果其右子树的最大层次为i,则其左子树的最大层次必为i或i+1
      - 满二叉树一定是完全二叉树，但是完全二叉树不一定是满二叉树
    - 性质：
      - 具有n个结点的完全二叉树的深度为**$\lfloor$log<sub>2</sub>n$\rfloor$+1**
      - 对于一颗完全二叉树来说，从上到下，从左到右编号，则对于任一一个结点i，有：
        - 若i=1，则为二叉树的根
        - 若i>1，则其双亲的结点为$\lfloor$$i/2\rfloor$
        - 若2i>n，则结点i为叶子结点，无左孩子；否则，其左孩子是结点2i
        - 若2i+1>n，则结点i无右孩子；否则，其右孩子是结点2i+1
    - 特殊的完全二叉树
      - 败者树
      - 胜者树







##### 二叉树的遍历

- 定义：顺着某一条搜索路径巡访二叉树中的结点，使得每个结点均被访问一次，而仅被访问一次
- 目的：得到树中所有结点的一个线性排列
- 用途：是树结构的插入、删除、修改、查找和排序运算的前提，是二叉树一切运算的基础和核心
- 类型：
  - 先序遍历（**根左右**）
    - 先访问根节点，再先序遍历左子树，最后先序遍历右子树
  - 中序遍历（**左根右**）
    - 先中序遍历左子树，再访问根节点，最后中序遍历右子树
  - 后序遍历（**左右根**）
    - 先后序遍历左子树，再后序遍历右子树，最后访问根节点
  - 拓展（对于一个算术表达式）
    - 先序遍历：表达式的前缀表示（波兰式）
    - 后序遍历：表达式的后缀表示（逆波兰式）
- 二叉树与遍历的关系：
  - 若二叉树中各结点的值均不相同，则二叉树结点的先序遍历、中序遍历和后序遍历都是唯一的
  - 由二叉树的先序遍历和后序遍历，或后序遍历和中序遍历可以确定唯一一颗二叉树







##### 二叉树的存储结构

- 顺序存储结构
  - 将满二叉树的结点层次编号，依次存放二叉树中的数据元素（如果是空的就不放）
  - 缺点：
    - 如果是只有右单支树，会浪费空间
    - 结点间关系蕴含在其存储位置中，浪费空间，适于存储满二叉树和完全二叉树
- 链式存储结构
  - 二叉链表
    - 有两个指针域，分别指向结点的左孩子和右孩子
    - 在n个结点的二叉链表中，有n+1个空指针域
  - 三叉链表







##### 森林

- 定义：
  - 是m(m>=0)棵互不相交的树的集合
- 与树的关系：
  - 树一定是森林，森林不一定是树（m=0）
  - 一棵树也可以看成是特殊的森林
  - 对于一棵树，把根节点删除，就变成了森林









##### 森林的遍历

- 森林的三部分
  - 森林中第一棵树的根结点
  - 森林中第一棵树的子树森林
  - 森林中其他树构成的**森林**
- 先序遍历
  - 访问森林中第一颗树的根结点
  - 先序遍历森林中第一棵树的子树森林
  - 先序遍历森林中（除第一棵树之外）其余树构成的森林
  - 即依次从左至右对森林中的每一棵树进行先根遍历
- 中序遍历
  - 中序遍历森林中第一棵树的子树森林
  - 访问森林中第一棵树的根结点
  - 中序遍历森林中（除第一棵树之外）其余树构成的森林
  - 即依次从左至右对森林中的每一棵树进行后根遍历







##### 二叉树与树的转换

- 原理：给定一棵树，可以找到唯一的一颗二叉树与之对应
- 树变二叉树：**兄弟相连留长子**
  - 加线：在兄弟之间加一条线
  - 抹线：对每个结点，除了其左孩子之外，去除其与其余孩子之间的关系
  - 旋转：以树的根结点为轴心，将整颗树顺时针旋转45<sup>o</sup>
- 二叉树变树：**左孩右右连双亲，去掉原来右孩线**
  - 加线：若p结点是双亲结点的左孩子，则将p的右孩子，右孩子的右孩子（以此类推），沿分支找到的所有右孩子，由于p的双亲相连（如果有一个结点，是它双亲的左孩子，那么就把这个结点的右孩子以及右孩子的右孩子都和它的双亲连接）
  - 抹线：抹掉原二叉树中双亲与右孩子之间的连线（去掉双亲和右孩子之间的线）
  - 调整：将结点按层次排列，形成树结构







##### 二叉树与森林的转换

- 森林变二叉树：**树变二叉根相连**
  - 将每棵树分别转换成二叉树
  - 将每棵树的根结点用线相连
  - 以第一棵树根节点为二叉树的根，再以根节点为轴心，顺时针旋转，构成二叉树型结构
- 二叉树变森林：**去掉全部右孩线，孤立二叉再还原**
  - 抹线：将二叉树中根节点与其右孩子连线，以及沿右分支搜索到的所有右孩子间连线全部抹掉，使之变成孤立的二叉树
  - 还原：将孤立的二叉树还原为树







##### 最优二叉树（哈夫曼树）

- 基本概念：
  - 判断树：用于描述分类过程的二叉树
  - 路径：从树中一个结点到另一个结点之间的分支构成这两个结点间的路径
  - 结点路径长度：两结点路径上的分支数（即边的数量）
  - 树的路径长度（记作TL）：从树根到每一个结点的路径长度之和
    - 结点数目相同的二叉树中，完全二叉树是路径长度最短的二叉树（但是路径长度最短不一定是完全二叉树）
  - 权：将树中结点赋给一个有着某种含义的数值，则这个数值称为该结点的权
  - 结点的带权路径长度：从根结点到该结点之间的路径长度与该结点的权的乘积
  - 树的带权路径长度：树中所有叶子结点的带权路径长度之和
- 定义：
  - 给定N个权值作为N个叶子结点，构造一棵二叉树，若该树的带权路径长度达到最小，称这样的二叉树为最优二叉树，即哈夫曼树
  - 带权路径长度最短是在度相同的树中比较而得的结果，即带权路径长度（WPL）最短的树

- 特点及性质：
  - 满二叉树不一定是哈夫曼树
  - 哈夫曼树中权值越大的叶子离根越近
    - 贪心算法：构造哈夫曼树时首先选择权值小的叶子结点
  - 哈夫曼树的结点的度数为0或2，没有度数为1的结点
  - 包含n个叶子结点的哈夫曼树中共有2n-1个结点
  - 包含n棵树的森林要经过n-1次合并才能形成哈夫曼树，共产生n-1个新结点
  - 经过n-1次合并产生n-1个新结点，且这n-1个新结点都是具有两个孩子的分支结点
- 构造哈夫曼树（哈夫曼算法）：
  - **构造森林全是根**
    - 根据n个给定权值{w1,w2,w3...,wn}，构成n棵二叉树的森林F={T1,T2,T3,...,Tn}，其中Ti只有一个带权为wi的根结点
  - **选用两小造新树**
    - 在F中选取两棵根结点的权值最小的树作为左右子树，构造一颗新的二叉树，且设置新的二叉树的根结点的权值**为其左右子树上根节点的权值之和**
  - **删除两小添新人**
    - 在F中删除这两棵树，同时将这新得到的二叉树加入到森林中
  - **重复二三剩新根**
    - 重复第二和第三这两个步骤，直至森林中只有一棵树为止，最后得到的树便是哈夫曼树
- 哈夫曼树的应用：
  - 挖坑







##### 二叉查找树（又称二叉搜索树）

- 定义：
  - 或为空树
  - 若其左子树非空，则左子树上所有结点的值均小于根结点的值
  - 若去右子树非空，则右子树上所有结点的值均大于等于根结点的值
  - 其左右子树本身又各是一颗二叉排序树
- 特点：
  - 中序遍历非空的二叉树排序树所得到的数据元素序列是一个按关键字排列的递增有序序列
- 二叉排序树的**查找**:
  - 若查找的关键字等于根结点，成功
  - 否则：若小于根结点，查其左子树；若大于根结点，查其右子树
  - 对其子树进行同样的操作
  - 性能分析：
    - 最好情况：O(log2n)
    - 最坏情况：O（n）
- 二叉排序树的**插入**：
  - 若二叉排序树为空，则插入节点作为根节点插入到空树中
  - 否则，继续在其左右子树上查找
    - 树中已有，不在插入
    - 树中没有，查找直至某个叶子结点的左子树或右子树为空为止，则插入结点应为该叶子节点的左孩子或右孩子
- 二叉排序树的**生成**：
  - 一个无序序列可以通过构造二叉排序树而变成一个有序序列，构造树的过程就是无序序列进行排序的过程
  - 插入的结点为叶子节点，所以无需移动其他结点，相当于在有序序列上插入记录而无需移动其他记录
  - 关键字的输入顺序不同，建立的不同二叉排序树
- 二叉排序树的**删除**
  - 被删除的如果是叶子结点，直接删除该节点，使其双亲结点中相应指针域的值为空
  - 如果只有左子树或右子树，用其左子树或右子树替换它，其双亲结点的相应指针域的值改为“指向被删除结点的左子树或右子树”
  - 被删结点既有左子树，又有右子树，以其中序前趋值替换，然后再删除该前趋节点（前趋是左子树中最大的结点）
    - 也可以用其后继替换，然后再删除该后继结点（后继是左子树中最小的结点）
- 提高形态不平衡的二叉排序树的查找效率：做平衡化处理，因此引入平衡二叉树







##### 平衡二叉树（又称avl树，BT树）

- 定义：
  - 或者是空树
  - 或者是具有下列性质的二叉排序树
    - 左子树与右子树的高度差的绝对值小于等于1
    - 左子树和右子树也是平衡二叉排序树
- 平衡因子：
  - 对于每个结点，都给一个平衡因子=结点左子树的高度-结点右子树的高度（bf），取值为0，-1
- 性质：
  - 对于一颗n个结点的avl树，其高度保持在O（log2n）数量级，asl(平均查找长度)也保持在log2n量级
- 二叉平衡树失衡后的调整
  - 挖坑
- 特殊的平衡二叉树
  - 红黑树







##### B树（又称B-树）

- 特殊的b树
  - B+树
  - B*树







##### 字典树