- 两个及两个以上的线程实现for循环，每次循环实现+1，循环100次，问最小sum为多少

- ```cpp
  int sum = 0;
  
  void count() {
      for (int i = 0; i < 10; ++ i) {
          ++ sum;  // 假设这里的sum是volititle的
      }
  }
  
  int main() {
      int n = 0;
      cin >> n; // n > 1
      for (int i = 0; i < n; ++ i) {
      	creat_thread(count());
      }
  }
  ```



- 答案最小为2（是一种非常极端的情况）

- 下述假设读到的内容是t，同时下面每一步每一次加法都是先从内存读入数据，然后操作，放回内存，这样的循环的

- | thread01                            | thread(2).....thread(n-1)                          | thread(n)                                  |
  | ----------------------------------- | -------------------------------------------------- | ------------------------------------------ |
  | 从内存中读入sum，t=sum=0            |                                                    |                                            |
  |                                     | 中间所有的线程都重复的将sum读入，将sum写至(n-2)*10 |                                            |
  |                                     |                                                    | 同样的读入sum，将sum写至(n-2)*10+9         |
  | 此时执行t++，写入sum=t，则此时sum=1 |                                                    |                                            |
  |                                     |                                                    | 读入sum（此时t=sum=1），执行t++，则此时t=2 |
  | 执行操作，使得最后写入sum的为11     |                                                    |                                            |
  |                                     |                                                    | 写入此时的t，则此时的sum为2                |

  



# 进程通信方式和线程通信方式



# 并发编程

- 设计一个死锁的场景：并发编程如何避免死锁？死锁出现了怎么办？
- 设计一个线程间同步的场景：多个线程之间轮流输出东西，需要保证输出的顺序。用信号量怎么做？
- 手写LRU