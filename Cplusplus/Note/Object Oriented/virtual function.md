# 虚函数为什么慢

- 和虚函数表有些许关系
- 虚函数其实最主要的性能开销在于它阻碍了编译器内联函数和各种函数级别的优化，导致性能开销较大
- 在普通函数中log(10)会被优化掉，它就只会被计算一次，而如果使用虚函数，log(10)不会被编译器优化，它就会被计算多次
- 如果代码中使用了更多的虚函数，编译器能优化的代码就越少，性能就越低
- 简而言之，就是虚函数阻止了编译器对函数的优化