# 作用

没有类的情况

- 隐藏。所有不加static的全局变量和函数具有全局可见性，可以在其他文件中使用，加了之后只能在该文件所在的编译模块中使用
- 默认初始化为0，包括未初始化的全局静态变量与局部静态变量，都存在全局未初始化区
  - 其实全局变量也具备这一属性，因为全局变量也存储在静态数据区。在静态数据区，内存中所有的字节默认值都是0x00
- 静态变量在函数内定义，始终存在，且只进行一次初始化，具有记忆性，其作用范围与局部变量相同，函数退出后仍然存在，但不能使用
  - 存储在静态数据区的变量会在程序刚开始运行时就完成初始化，也是唯一的一次初始化



有类的情况

- static成员变量：
  - 只与类关联，不与类的对象关联（对类的所有对象只有一份拷贝）
  - 定义时要分配空间，不能在类声明中初始化，必须在类定义体外部初始化，初始化时不需要标示为static
  - 可以被非static成员函数任意访问
- static成员函数：
  - 不具有this指针，无法访问类对象的非static成员变量和非static成员函数，因而只能访问类的 static 成员变量
  - 不能被声明为const、virtual和volatile
  - 可以被非static成员函数任意访问（只可被类内的其它函数调用，这个函数的使用范围被限制在声明它的模块内；不能被模块外其它函数访问）
- static类对象：
  - 必须在类内声明，在类外进行初始化（static修饰的变量先于对象存在，如果是在类内初始化，会导致每个对象都包含该静态成员）







# 其他

- 在静态方法里面创建静态变量，那这个静态变量一开始会初始化吗
  - 答不会，参考线程安全的懒汉模式
- 如何实现局部变量只被初始化一次
  - 反汇编后发现，是有一个标志用来记录该局部静态变量是否初始化过，而这个标记可以同时保存8个静态变量的初始状态
  - 通常这个标志出现在最先定义的局部静态变量附近
  - 如果已初始化了，就跳过
  - 参考：https://www.cnblogs.com/yilang/p/12106236.html
  - https://www.cnblogs.com/xuxm2007/p/4652944.html