# EM 组件

应用程序分为 **平台级应用程序** 和 **用户级应用程序** 

应用程序的组成：可执行文件，执行清单，服务实例清单，其他附加项

可执行文件是一个可以被 os 执行的 二进制文件，即 executable

而一个应用程序可以有多个 executable

Em 组件利用 os 提供的 fork 和 exec ，将可执行文件实例化为进程

进程分为 **报告进程** 和 **非报告进程**

功能组：为具有功能相关性的进程定义了状态机（比如说一些进程的运行，需要依赖其他的守护进程）

功能组分为 **machine功能组** 和 **用户自定义功能组** 

功能组的状态由 sm 组件进行管理

Machine manifest 主要用于配置环境变量，功能组及其状态，someip 等相关信息

Execution manifest 主要用于配置，启动参数、所需的环境变量，log 的配置，可执行文件的名称路径以及依赖的进程

## EM 提供的功能

管理进程生命周期的平台级应用程序

Machine 的初始化；应用程序的启动和终止；维护进程启动与关闭的顺序

读取 machine manifest 和 execution manifest 的配置，配置进程的启动变量和启动参数

## 进程状态

Exec 组件为每个进程单独维护状态：

starting、running、terminated 和 terminating

## 执行状态

报告进程（分为报告进程和非报告进程） 维护的状态：

initializing，running 和 terminating

## 状态管理

EM 组件启动后会自动进入 startup 状态，其余状态的切换由 sm 组件完成

一个 进程 只能属于一个功能组，且只能依赖同功能组且同状态的其他 process

## 功能组切换

启动参数不同，则需要重启进程

启动参数相同，不需要重启进程