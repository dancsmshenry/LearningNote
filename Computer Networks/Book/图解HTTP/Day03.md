##### 第七章 确保Web安全的HTTPS



###### HTTP的缺点

- 通信使用明文可能会被窃听（不加密）
  - 通过wireshark抓包工具可以获取互联网中的信息流（所以被加密了还是会被看到）
  - 加密的方式
    - 通信过程中的加密：SSL或TSL加密，组成HTTPS
    - 内容的加密：
- 不验证通信方的身份就可能遭遇伪装
  - 任何人都可以发送请求（如果是这样，那主机就会被很多的僵尸网络攻击导致瘫痪，参考**DOS攻击**）
  - 但是，如果使用了SSL，就可以使用一种证书的手段来确定对方的身份
- 无法证明报文完整性，可能已经被篡改
  - 像这样，请求或响应在传输途中，遭攻击者拦截并篡改内容的攻击称为**中间人攻击**
  - 防止篡改的方法：md5和sha-1以及用来确认文件的数字签名，还有PGP创建的数字签名以及MD5算法生成的散列值



###### MD5

- 定义：
  - 一种被广泛使用的密码散列函数，可以产生出一个128位（16字节）的散列值（hash value），用于确保信息传输完整一致
- 叙述：
  - MD5码以512位分组来处理输入的信息，且每一分组又被划分为16个32位子分组，经过了一系列的处理后，算法的输出由四个32位分组组成，将这四个32位分组级联后将生成一个128位散列值
- 缺点：
  - 存在碰撞（在对两个不同的内容使用 MD5算法运算的时候，有可能得到一对相同的结果值）



###### HTTPS

- 定义：
  - 超文本传输安全协议（英语：HyperText Transfer Protocol Secure，缩写：HTTPS；常称为HTTP over TLS、HTTP over SSL或HTTP Secure）是一种通过计算机网络进行安全通信的传输协议。HTTPS经由HTTP进行通信，但利用SSL/TLS来加密数据包。HTTPS开发的主要目的，是提供对网站服务器的身份认证，保护交换资料的隐私与完整性。这个协议由网景公司（Netscape）在1994年首次提出，随后扩展到互联网上
  - HTTP+通信加密+证书+完整性保护
  - 正常：http->tcp，现在：http->ssl->tcp



###### SSL加密

- 定义：
  - 是为网络通信提供安全及数据完整性的一种安全协议
  - 是应用最广泛的网络安全技术
- 采用一种叫做公开密钥加密的方法
  - 最早，共享密钥加密，对称密钥加密（可是把密钥发给别人的时候也会有危险啊！！）
  - 所以是信息用公钥加密（公钥全世界都知道的），但是如果要解密的话，只能用我的私人密钥来解密；换言之，就是我（接收方）做出公钥和密钥两把钥匙，然后我把公钥传播出去，让那些想要发送信息给我的人用公钥加密信息然后再发给我，我再用私钥解密
  - 前提是：要想根据公钥和信息解密原文是非常困难的
- 而https采用的是共享密钥和公开密钥加密的混合加密（公开密钥会慢一点）
- 问题：公开密钥也会在发布的时候被攻击者替换



###### SSL协议

- SSL协议位于TCP/IP协议与各种应用层协议之间，为数据通讯提供安全支持。SSL协议可分为两层：
  - SSL记录协议（SSL Record Protocol）：它建立在可靠的传输协议（如TCP）之上，为高层协议提供数据封装、压缩、加密等基本功能的支持
  - SSL握手协议（SSL Handshake Protocol）：它建立在SSL记录协议之上，用于在实际的数据传输开始前，通讯双方进行身份认证、协商加密算法、交换加密密钥等



###### 数字证书

- 分类：
  - 证明公开密钥正确性的证书：数字证书认证机构（CA）
  - 可证明组织真实性的EV SSL证书
  - 用以确认客户端的客户端证书
  - 由自认证机构颁发的证书称为自签名证书
- ssl证书：
  - 定义：
    - SSL证书是数字证书的一种，类似于驾驶证、护照和营业执照的电子副本。因为配置在服务器上，也称为SSL服务器证书
    - SSL 证书就是遵守 SSL协议，由受信任的数字证书颁发机构CA，在验证服务器身份后颁发，具有服务器身份验证和数据传输加密功能
  - 用途：
    - SL证书通过在客户端浏览器和Web服务器之间建立一条SSL安全通道，即通过它可以激活SSL协议，实现数据信息在客户端和服务器之间的加密传输，可以防止数据信息的泄露，保证了双方传递信息的安全性，而且用户可以通过服务器证书验证他所访问的网站是否是真实可靠
    - Secure socket layer(SSL)安全协议是由Netscape Communication公司设计开发。该安全协议主要用来提供对用户和服务器的认证；对传送的数据进行加密和隐藏；确保数据在传送中不被改变，即数据的完整性，现已成为该领域中全球化的标准。由于SSL技术已建立到所有主要的浏览器和WEB服务器程序中，因此，仅需安装服务器证书就可以激活该功能了
- 缺陷：
  - 加密太慢，所以只有重要的信息才会用https来传输（而且证书的费用昂贵）
    - 通信慢
    - 大量消耗CPU及内存资源（ssl加速器）



###### TSL加密

- 标准化的SSL



###### MAC

- 定义
  - 在密码学中，消息认证码（英语：Message authentication code，缩写为MAC），又译为消息鉴别码、文件消息认证码、讯息鉴别码、信息认证码，是经过特定算法后产生的一小段信息，检查某段消息的完整性，以及作身份验证。它可以用来检查在消息传递过程中，其内容是否被更改过，不管更改的原因是来自意外或是蓄意攻击。同时可以作为消息来源的身份验证，确认消息的来源
- 信息鉴别码不能提供对信息的保密，若要同时实现保密认证，同时需要对信息进行加密。





##### 第八章 确认访问用户身份的认证

###### BASIC认证（基本认证）

- 就是普通的账号密码验证



###### DIGEST认证（摘要认证）

- 质询响应：一开始一方会先发送认证要求（账号密码什么的）给另一方，接着使用从另一方那接受到的质询码计算生成响应码，最后再返回验证



###### SSL客户端认证

- 借助ssl证书来验证是否为假的



###### FORMBASE认证（基于表单认证）

- 就一般的前端表单输入数据，后端验证数据

- 事实是：前两个不怎么用，第三个又太贵了，所以大多用第四个
- 基于表单验证的密码保存方法
  - 先利用给密码加盐的方式给密码增加额外信息（先由服务器随机生成一个字符串，要足够的长，然后把它和密码字符串相连接），再用散列函数计算出散列值后保存



###### Session

- 定义：
  - 在计算机中，尤其是在网络应用中，称为“会话控制”。Session对象存储特定用户会话所需的属性及配置信息
- 用途：
  - 当用户在应用程序的Web页之间跳转时，存储在Session对象中的变量将不会丢失，而是在整个用户会话中一直存在下去





##### 第九章 基于HTTP的功能追加协议

###### Ajax

###### Comet

###### Spdy

###### Websocket

###### HTTP/2.0

###### WebDAV