- [第一章 了解web及网络基础](#第一章-了解web及网络基础)
  - [HTTP（HyperText Transfer Protocol）](#httphypertext-transfer-protocol)
  - [TCP/IP协议族](#tcpip协议族)
  - [路由选择](#路由选择)
  - [IP协议](#ip协议)
  - [IP地址](#ip地址)
  - [ARP协议](#arp协议)
  - [MAC地址](#mac地址)
  - [TCP协议](#tcp协议)
  - [DNS服务（Domain Name System）](#dns服务domain-name-system)
  - [URI（Uniform Resource Identifier)](#uriuniform-resource-identifier)
  - [URL（Uniform Resource Locator）](#urluniform-resource-locator)
  - [URI和URL的区别](#uri和url的区别)
- [第二章 简单的HTTP协议](#第二章-简单的http协议)
  - [客户端和服务器](#客户端和服务器)
  - [HTTP报文组成](#http报文组成)
  - [无状态协议](#无状态协议)
  - [HTTP方法](#http方法)
  - [持久连接](#持久连接)
  - [管线化](#管线化)
  - [cookie](#cookie)
- [第三章 HTTP报文内的HTTP信息](#第三章-http报文内的http信息)
  - [报文的组成](#报文的组成)
  - [提高发送效率](#提高发送效率)
  - [MIME](#mime)
  - [范围请求](#范围请求)
  - [内容协商](#内容协商)







##### 第一章 了解web及网络基础

###### HTTP（HyperText Transfer Protocol）

- HTTP0.9/1.0/1.1/2.0
- 定义：超文本传输协议（英语：HyperText Transfer Protocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议。HTTP是万维网的数据通信的基础。
  - 设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。通过HTTP或者HTTPS协议请求的资源由统一资源标识符（Uniform Resource Identifiers，URI）来标识
- 用途：生成针对目标Web服务器的http请求，对于web服务器请求的内容的处理





###### TCP/IP协议族

- 定义：
  - 互联网协议套件（英语：Internet Protocol Suite，缩写IPS）是网络通信模型，以及整个网络传输协议家族，为网际网络的基础通信架构。它常通称为**TCP/IP协议族**（英语：TCP/IP Protocol Suite，或TCP/IP Protocols），简称TCP/IP。因为该协议家族的两个核心协议：**TCP（传输控制协议）和IP（网际协议）**，为该家族中最早通过的标准
- 理解：
  - 把与互联网相关联的协议集合起来
  - 也可以认为时TCP和IP两种协议
- 应用层
  - 决定了向用户提供应用服务时通信的服务
  - 包括FTP和DNS服务
- 传输层
  - 提供处于网络连接中的两台计算机之间的数据传输
  - 包括TCP/UDP
- 网络层（网络互连层）
  - 用来处理在网络上流动的数据包（数据包是网络传输的最小单位）
- 数据链路层
  - 用来处理连接网络的硬件部分





###### UDP

- 定义：
  - 用户数据报协议（英语：User Datagram Protocol，缩写：UDP；又称**用户数据包协议**）是一个简单的面向数据报的通信协议，位于OSI模型的传输层
  - 在TCP/IP模型中，UDP为网络层以上和应用层以下提供了一个简单的接口。UDP**只提供数据的不可靠传递**，它一旦把应用程序发给网络层的数据发送出去，就不保留数据备份（所以UDP有时候也被认为是不可靠的数据报协议）。UDP在IP数据报的头部仅仅加入了复用和数据校验字段





###### 路由选择

- 是指选择通过互连网络从源节点向目的节点传输信息的通道，而且信息至少通过一个中间节点。路由选择工作在 OSI 参考模型的网络层





###### IP协议

- 在网络层负责传输
- 定义：网际协议（英语：Internet Protocol，缩写：IP），又称互联网协议，是用于分组交换数据网络的协议
- 作用：
  - 是把各种数据包传送给对方
  - 搜索对方地址，一边中转一边传送
- 作用：把各种数据包传送给对方（两个前提：ip地址和mac地址）
  - ip地址指明了节点被分配到的地址，mac地址是指网卡所属的固定地址





###### IP地址

- **IP地址**（英语：IP Address，全称Internet Protocol Address），又译为**网际协议地址**、**互联网协议地址**。当设备连接网络，设备将被分配一个IP地址，用作标识。通过IP地址，设备间可以互相通讯，如果没有IP地址，我们将无法知道哪个设备是发送方，无法知道哪个是接收方
- 主要功能：
  - 标识网络或设备
    - 标识其网络接口，并且提供主机在网络中的位置
  - 寻址
    - 网际协议（缩写：IP）的一个重要机制就是网络寻址（英语：internet address）。该功能的目的是将 数据报 从一个网络模块 送到 目的地。在发送的整个过程，IP地址（address）充当着目的地的位置，域名（name）意味着我们要找什么，路由（route）代表着如何到达目的地的这个过程。[3] 每个IP数据包的标头包含了发送主机的IP地址和目的主机的IP地址
- 分为IPv4（10进制）和IPv6（16进制）





###### ARP协议

- 负责解析地址的ARP协议

- 根据通信方的ip地址就可以反查出对应的mac地址
- 地址解析协议（英语：Address Resolution Protocol，缩写：ARP）是一个通过解析网络层地址来找寻数据链路层地址的网络传输协议
- ARP是通过网络地址来定位MAC地址
- 在IPv6中用NDP代替ARP协议
  - 邻居发现协议（英语：Neighbor Discovery Protocol简称：NDP或ND）是TCP/IP协议栈的一部分，用于IPv6。它工作在数据链路层，负责在链路上发现其他节点和相应的IP地址，并确定可用路由和维护关于可用路径和其他活动节点的信息可达性







###### MAC地址

- MAC地址（英语：Media Access Control Address），直译为媒体访问控制地址，也称为局域网地址（LAN Address），以太网地址（Ethernet Address）或物理地址（Physical Address），它是一个用来确认网络设备位置的地址。





###### TCP协议

- 三次握手策略（标志：syn和ack）
  - ![](https://gitee.com/dancsmshenry/photo/raw/master/img/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png)
- 为了更容易传送大数据才把数据分割，而且TCP协议能够确认**数据**最终是否**送达**到对方
- 若是握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包
- 位于传输层，提供可靠的字节流服务





###### DNS服务（Domain Name System）

- 定义：
  - 域名系统（DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网，DNS使用TCP和UDP端口53
  - 当前，对于每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符
  - 提供域名到ip地址之间的解析服务（可以通过域名查找ip地址，也可以从ip地址反查域名）
- 是和http协议一样位于应用层的协议，**提供域名到IP地址之间的解析服务**
- 用户通常使用主机名或域名访问对方的计算机





###### URI（Uniform Resource Identifier)

- 定义：
  - **在电脑术语中，统一资源标识符是一个用于标识某一互联网资源名称的字符串**。 该种标识允许用户对任何（包括本地和互联网）的资源通过特定的协议进行交互操作。URI由包括确定语法和相关协议的方案所定义
  - Web上可用的每种资源 -HTML文档、图像、视频片段、程序等 - 由一个通用资源标识符（Uniform Resource Identifier, 简称"URI"）进行定位
  - 统一资源定位符（URL）,统一资源名称（URN）是URI的子集
- 结构组成：
  - 资源的命名机制
  - 存放资源的主机名
  - 资源自身的名称
  - ps:
    - 不一定都要有，只要能够唯一标识资源的都行
- 格式：
  - 协议方案名（http或https）+ 登录信息（认证）+ 服务器地址 + 服务器端口号 + 带层次的文件路径+查询字符串+片段标识符





###### URL（Uniform Resource Locator）

- 定义：
  - 即统一资源定位系统，是**因特网的万维网服务程序上用于指定信息位置的表示方法**
- 结构组成：
  - 第一部分是协议(或称为服务方式)
  - 第二部分是存有该资源的主机IP地址(有时也包括端口号)
  - 第三部分是主机资源的具体地址，如目录和文件名等
  - ps:
    - 第一部分和第二部分用“://”符号隔开，第二部分和第三部分用“/”符号隔开
    - 第一部分和第二部分是不可缺少的，第三部分有时可以省略
- URN：即统一资源名称，是统一资源标识（URI）的历史名字





###### URI和URL的区别

- uri是一个比较大概抽象的地址，而url是一个确切的地址，通过url能够找到准确的一个文件

- 参考知乎的一段话

  - ```markdown
    统一资源标志符URI就是在某一规则下能把一个资源独一无二地标识出来。
    拿人做例子，假设这个世界上所有人的名字都不能重复，那么名字就是URI的一个实例，通过名字这个字符串就可以标识出唯一的一个人。
    现实当中名字当然是会重复的，所以身份证号才是URI，通过身份证号能让我们能且仅能确定一个人。
    那统一资源定位符URL是什么呢。也拿人做例子然后跟HTTP的URL做类比，就可以有：
    
    动物住址协议://地球/中国/浙江省/杭州市/西湖区/某大学/14号宿舍楼/525号寝/张三.人
    ```

  - 就通过uri能够把每个人区别开来（身份证号能够区别每个人），但是要找到确切的那个人（找到他需要通过某种规则，根据这种规则找到这个人。比如地址这种规则，根据地址的格式就可以找到这个人），还得靠url

  - 所以不论是用定位的方式还是用编号的方式，我们都可以唯一确定一个人，都是URl的一种实现，而URL就是用定位的方式实现的URI。

  - 回到Web上，假设所有的Html文档都有唯一的编号，记作html:xxxxx，xxxxx是一串数字，即Html文档的身份证号码，这个能唯一标识一个Html文档，那么这个号码就是一个URI。而URL则通过描述是哪个主机上哪个路径上的文件来唯一确定一个资源，也就是定位的方式来实现的URI







##### 第二章 简单的HTTP协议

###### 客户端和服务器

- 客户端定义：
  - 客户端（Client）或称为用户端，是指与服务器相对应，为客户提供本地服务的程序。除了一些只在本地运行的应用程序之外，一般安装在普通的客户机上，需要与服务端互相配合运行





###### HTTP报文组成

- 具体的报文内容

  - 请求首部字段
    - 开头表明使用什么方法请求访问服务器（get，post）
      - get获取资源
      - post传输实体主体
      - put传输文件（存在安全问题）
      - head获取报文首部，用于确认uri的有效性以及资源更新的日期时间
      - delete删除文件
      - options询问支持的方法
      - trace追踪路径
      - connect要求用隧道协议连接代理
    - 随后的字符串是指资源对象的url
    - 最后是http的版本号
  - 状态码（dddd）及其原因
  - 创建响应的日期时间
  - 资源主体的实体






###### 无状态协议

- 由此引出cookie和session
- 定义：
  - 指比如客户获得一张网页之后关闭浏览器，然后再一次启动浏览器，再登录该网站，但是服务器并不知道客户关闭了一次浏览器





###### HTTP方法

- get获取资源
- post传输实体主体
- put传输文件（存在安全问题）
- head获取报文首部，用于确认uri的有效性以及资源更新的日期时间
- delete删除文件
- options询问支持的方法
- trace追踪路径
- connect要求用隧道协议连接代理



###### Get和Post的区别

- 安全方面
  - 按照网上大部分文章的解释，POST 比 GET 安全，因为数据在地址栏上不可见。然而，从传输的角度来说，他们都是不安全的，因为 HTTP 在网络上是明文传输的，只要在网络节点上捉包，就能完整地获取数据报文，要想安全传输，就只有加密，也就是 HTTPS
  - GET参数通过URL传递，POST放在Request body中
- get请求的长度限制
  - HTTP 协议没有 Body 和 URL 的长度限制，对 URL 限制的大多是浏览器和服务器的原因
  - 浏览器原因就不说了，服务器是因为处理长 URL 要消耗比较多的资源，为了性能和安全（防止恶意构造长 URL 来攻击）考虑，会给 URL 长度加限制
- post只会产生一个TCP数据包
  - header 和 body 分开发送是部分浏览器或框架的请求方法，不属于 post 必然行为
    - post 会将 header 和 body 分开发送，先发送 header，服务端返回 100 状态码再发送 body，即这种情况是**特殊情况**



###### 持久连接

- 持久连接（在http1.1中都是持久连接，但是http1.1中未被标准化）





###### 管线化

- 定义：HTTP管线化（英语：HTTP pipelining）是将多个HTTP请求（request）整批提交的技术，而在发送过程中不需先等待伺服端的回应
- 原因及解释：
  - 通常，HTTP请求总是顺序发送的，下一个请求只有在当前请求的响应被完全接受的时候才会被发送。由于网络延迟和带宽的限制，这样会导致在服务器发送下一个响应的时候中间有很大的延迟
  - HTTP/1.1允许多个HTTP请求通过一个套接字同时被输出 ，而不用等待相应的响应。然后请求者就会等待各自的响应，这些响应是按照之前请求的顺序依次到达
- 只有**幂等**的请求才能被管线化
- 幂等：
  - 定义：在编程中一个幂等操作的特点是其**任意多次**执行所产生的**影响**均与**一次执行**的影响相同。幂等函数，或幂等方法，是指可以使用相同参数重复执行，并能获得相同结果的函数
  - 即`f(f(x))=f(x)`
  - HTTP/方法的幂等性：
    - 是指一次和多次请求某一个资源应该具有同样的副作用。幂等性的请求，实际上就是多次操作都不会改变结果的请求，比如GET，我可以多次从同一个地方获取资源，但是对于资源本身来说并不会发生什么变化，我GET10次和GET100次，资源都没有发生任何变化。而Post则不同了，我提交表单10次，和100次，造成的结果是不同的，至少数据库里新增的数据有不同
- HTTP管线化不是HTTP2的内容，是对HTTP1.1协议下，服务器不能很好处理并行请求的一个改进。
- 在正确实现的条件下， GET ， HEAD ， PUT 和 DELETE  等方法都是幂等的，而  POST  方法不是。所有的 safe 方法也都是幂等的
  - 如post请求，调用多次后后增加多行记录
  - 而delete方法，可能会造成返回码不同（可要这么说，不都会不同吗）
    - 解释：
      - 幂等性只与后端服务器的实际状态有关，而每一次请求接收到的状态码不一定相同
      - 一个HTTP方法是**幂等**的，指的是同样的请求被执行一次与连续执行多次的**效果**是一样的，这里是指效果一样
- 需要注意的是，服务器不一定会确保请求方法的幂等性，有些应用可能会错误地打破幂等性约束
- 不应该在建立新连接的时候发出管线化的请求 ，因为不能确源服务或代理是否支持HTTP/1.1





###### cookie

- 有了cookie后，请求报文后会有cookie一行
- 定义：指某些网站为了辨别用户身份而储存在用户本地终端（Client Side）上的数据（通常经过加密）
- 分类：
  - Cookie 保存在客户端中，按在客户端中的存储位置，可分为内存 Cookie 和硬盘 Cookie。
  - 内存 Cookie 由浏览器维护，保存在内存中，浏览器关闭即消失，存在时间短暂。硬盘 Cookie 保存在硬盘里，有过期时间，除非用户手动清理或到了过期时间，硬盘 Cookie 不会清除，存在时间较长。所以，按存在时间，可分为非持久 Cookie 和持久 Cookie
- 原因：HTTP协议是无状态的
- 缺点：
  - Cookie 会被附加在每个 HTTP 请求中，所以无形中增加了流量。
  - 由于 HTTP 请求中的 Cookie 是明文传递的，所以安全性成问题，除非使用超文本传输安全协定
  - Cookie 的大小限制在 4 KB 左右，对于复杂的存储需求来说是不够用的





##### 第三章 HTTP报文内的HTTP信息

###### 报文的组成

- 报文首部（服务器端或客户端需处理的请求或响应的内容以及属性）
  - 对于请求（响应）报文：
    - 请求（状态）行
      - 包含请求方法，请求uri和http版本
      - 包含响应结果的状态码，原因短语和http版本
    - 请求（响应）首部字段
    - 通用首部字段
    - 实体首部字段
    - 其他
- 空行
- 报文主体（应被发送的数据）

- 报文主体和实体
  - 报文是http通信中的基本单位，由8位组字节流组成
  - 实体，作为请求或响应的有效载荷数据被传输
  - http报文的主体用于传输请求或响应的实体主体
    - 只有当传输中进行编码操作时，实体主体的内容发生改变，才会导致实体和报文主体的不同





###### 提高发送效率

- 压缩发送的内容（将内容压缩为zip格式再发送）
  - 常用的内容编码：gzip,compress,deflate
- 分割发送的分块传输编码





###### MIME

- 多用途互联网邮件扩展（英语：Multipurpose Internet Mail Extensions，缩写：MIME）是一个互联网标准，它扩展了电子邮件标准，使其能够支持： 
  - 非ASCII字符文本； 非文本格式附件（二进制、声音、图像等）
  - 由多部分（multiple parts）组成的消息体
  - 包含非ASCII字符的头信息（Header information）。这个标准被定义在 RFC 2045、RFC 2046、RFC 2047、RFC 2048、RFC 2049 等RFC中。



###### 范围请求

- 用到首部字段Range来指定资源的byte范围





###### 内容协商

- 分类：	
  - 服务器驱动协商
  - 客户端驱动协商
  - 透明协商
- 定义：通过为同一 URI 指向的资源提供不同的展现形式，可以使用户代理选择与用户需求相适应的最佳匹配（例如，文档使用的自然语言，图片的格式，或者内容编码形式）
- 补充：
  - 一份特定的文件称为一项资源。当客户端获取资源的时候，会使用其对应的 URL 发送请求。服务器通过这个 URL 来选择它指向的资源的某一变体——每一个变体称为一种展现形式——然后将这个选定的展现形式返回给客户端
  - 整个资源，连同它的各种展现形式，共享一个特定的 URL
  - 当一项资源被访问的时候，特定展现形式的选取是通过内容协商机制来决定的，并且客户端和服务器端之间存在多种协商方式
- 实现方式：
  - 客户端设置特定的 HTTP 首部 （又称为服务端驱动型内容协商机制或者主动协商机制）；这是进行内容协商的标准方式
  - 服务器返回 300 (Multiple Choices) 或者 406 (Not Acceptable) HTTP 状态码 （又称为代理驱动型协商机制或者响应式协商机制）
- 代理驱动型内容协商机制
  - 在这种协商机制中，当面临不明确的请求时，服务器会返回一个页面，其中包含了可供选择的资源的链接。资源呈现给用户，由用户做出选择
  - 实现方法：过脚本技术来完成的，尤其是 JavaScript 重定向技术
- 服务端驱动型内容协商机制
  - 定义：在服务端驱动型协商机制或者主动协商机制中，浏览器（或者其他任何类型的用户代理）会随同 URL 发送一系列的**消息头**，这些消息头描述了用户倾向的选择。服务器则**以此为线索**，通过内部算法来选择最佳方案提供给客户端。相关算法与具体的服务器相关，并没有在规范中进行规定