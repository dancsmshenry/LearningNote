#### 应用层协议

##### 前言

- TCP和IP等下层协议是不依赖于上层应用类型、适用性非常广的协议，而应用协议是**为了实现某种应用而设计和创造的协议**

##### telnet（一种应用层协议）

- 定义：
  - 使用于互联网及局域网中，使用虚拟终端的形式，提供双向、以文字字符串为主的命令行接口交互功能。属于TCP/IP协议族的其中之一，是互联网远程登录服务的标准协议和主要方式，常用于服务器的远程控制，可供用户在本地主机运行远程主机上的工作
- 用途：
  - 用户首先在电脑运行Telnet程序，连线至目的地服务器，然后输入账号和密码以验证身份。用户可以在本地主机输入命令，然后让已连接的远程主机运行，就像直接在对方的控制台上输入一样。传统Telnet会话所传输的资料并未加密，账号和密码等敏感资料容易会被窃听，因此很多服务器都会屏蔽Telnet服务，改用更安全的SSH。

- 仿真终端功能
  - 仿真终端（nvt）
  - 行模式
  - 透明模式
- 协商选择机制
- 用于登录路由器或高性能交换机

##### ssh（安全外壳协议）

- 定义：
  - Secure Shell（安全外壳协议，简称SSH）是一种加密的网络传输协议，可在不安全的网络中为网络服务提供安全的传输环境
- SSH通过在网络中创建安全隧道来实现SSH客户端与服务器之间的连接
- SSH最常见的用途是远程登录系统，人们通常利用SSH来传输命令行界面和远程执行命令。SSH使用频率最高的场合是类Unix系统，但是Windows操作系统也能有限度地使用SSH
- SSH以非对称加密实现身份验证[2]。身份验证有多种途径，例如其中一种方法是使用自动生成的公钥-私钥对来简单地加密网络连接，随后使用密码认证进行登录；另一种方法是人工生成一对公钥和私钥，通过生成的密钥进行认证，这样就可以在不输入密码的情况下登录。任何人都可以自行生成密钥。公钥需要放在待访问的电脑之中，而对应的私钥需要由用户自行保管。认证过程基于生成出来的私钥，但整个认证过程中私钥本身不会传输到网络中。
- SSH协议有两个主要版本，分别是SSH-1和SSH-2。无论是哪个版本，核实未知密钥来源都是重要的事情，因为SSH只验证提供用户是否拥有与公钥相匹配的私钥，只要接受公钥而且密钥匹配服务器就会授予许可。这样的话，一旦接受了恶意攻击者的公钥，那么系统也会把攻击者视为合法用户

##### FTP（文本传输协议）

- 定义：
  - 文件传输协议（英语：File Transfer Protocol，缩写：FTP）是一个用于在计算机网络上在客户端和服务器之间进行文件传输的应用层协议。文件传送（file transfer）和文件访问（file access）之间的区别在于：前者由FTP提供，后者由如NFS等应用系统提供

- 两条TCP连接
  - 一条用来控制，一条用来数据的传输
  - 控制用的是tcp21号端口
  - 数据传输用的端口是20
  - 通常用于数据传输的tcp连接是按照与控制用的连接相反的方向建立的
- FTP是一个8位的客户端-服务器协议，能操作任何类型的文件而不需要进一步处理，就像MIME或Unicode一样。但是，FTP有着极高的延时，这意味着，从开始请求到第一次接收需求数据之间的时间，会非常长；并且不时的必须执行一些冗长的登录进程

##### POP3（邮局协议）

- 此协议主要用于支持使用客户端远程管理在服务器上的电子邮件
- 最新版本为POP3，全名“Post Office Protocol - Version 3”，而提供了SSL加密的POP3协议被称为POP3S。
- 其具体过程是：邮件发送到服务器上，电子邮件客户端调用邮件客户机程序以连接服务器，并下载所有未阅读的电子邮件。

##### MIME（互联网媒体类型）

- 使得互联网能够处理文本格式以外的邮件
- 是给互联网上传输的内容赋予的分类类型

##### SMTP（简单邮件传输协议）

- 发送电子邮件的协议，使用的是TCP的25号端口
- 但是有一个坏处，就是接收端的电脑一定要长期打开才能够接受邮件，即该协议支持的是发送端主机的行为，不是接受端的行为
- SMTP是一个“推送“协议，它不允许根据需要从远程服务器上“拉取”消息。要拉取消息到客户端，邮件客户端必须使用POP3或IMAP。另一个SMTP服务器可以使用ETRN在SMTP上触发一个发送
- SMTP是一个相对简单的基于文本的协议。在其之上指定了一条消息的一个或多个接收者（在大多数情况下被确认是存在的），然后消息文本会被传输

##### POP（邮件协议）

- 主要用于支持**使用客户端远程管理在服务器上的电子邮件**。最新版本为POP3，全名“Post Office Protocol - Version 3”，而提供了SSL加密的POP3协议被称为POP3S
- 在pop中邮件是由客户端进行管理
- 其具体过程是：邮件发送到服务器上，电子邮件客户端调用邮件客户机程序以连接服务器，并下载所有未阅读的电子邮件。

##### IMAP（因特网信息访问协议）

- 用来**从本地邮件客户端访问远程服务器上的邮件**

##### SNMP（简单网络管理协议）

- 定义：
  - 简单网络管理协议（SNMP，Simple Network Management Protocol）构成了互联网工程工作小组（IETF，Internet Engineering Task Force）定义的Internet协议族的一部分。该协议能够支持网络管理系统，用以监测连接到网络上的设备是否有任何引起管理上关注的情况。它由一组网络管理的标准组成，包含一个应用层协议（application layer protocol）、数据库模式（database schema），和一组资料对象

##### RTP（实时传输协议）

- 定义：
  - RTP协议详细说明了在互联网上传递音频和视频的标准数据包格式。它一开始被设计为一个多播协议，但后来被用在很多单播应用中。RTP协议常用于流媒体系统（配合RTSP协议），视频会议和一键通（Push to Talk）系统（配合H.323或SIP），使它成为IP电话产业的技术基础。RTP协议和RTP控制协议RTCP一起使用，而且它是创建在UDP协议上的

##### RTCP（实施传输控制协议）

- 定义：
  - RTCP为RTP媒体流提供信道外（out-of-band）控制。RTCP本身并不传输数据，但和RTP一起协作将多媒体数据打包和发送。RTCP定期在流多媒体会话参加者之间传输控制数据。RTCP的主要功能是为RTP所提供的服务质量（Quality of Service）提供反馈

##### RMON（远端网络监控）

- 定义：
  - 是简单网络管理协定（SNMP）的一种管理资讯库。RMON为一个树状的物件数据库，用以定义SNMP协定基础的管理控制台和远端监视器之间通讯的标准网络监视功能及界面

##### SIP（会话发起协议）

- 用途：
  - 用于创建，修改和终止包括视频，语音，即时通信，在线游戏和虚拟现实等多种多媒体元素在内的交互式用户会话

##### P2P（点对点网络）

- 定义：
  - 对等式网络（英语：peer-to-peer， 简称P2P），又称点对点技术，是无中心服务器、依靠用户群（peers）交换信息的互联网体系，它的作用在于，减低以往网路传输中的节点，以降低资料遗失的风险。与有中心服务器的中央网络系统不同，对等网络的每个用户端既是一个节点，也有服务器的功能，任何一个节点无法直接找到其他节点，必须依靠其户群进行信息交流
- 分类：
  - ![](https://gitee.com/dancsmshenry/photo/raw/master/img/P2P%E7%9A%84%E5%88%86%E7%B1%BB.PNG)
- 优势：
  - P2P网络的一个重要的目标就是让所有的客户端都能提供资源，包括带宽，存储空间和计算能力。因此，当有节点加入且对系统请求增多，整个系统的容量也增大。这是具有一组固定服务器的Client-Server结构不能实现的，因为在上述这种结构中，客户端的增加意味着所有用户更慢的数据传输
  - P2P网络的分布特性通过在多节点上复制数据，也增加了防故障的健壮性，并且在一般型P2P网络中，节点不需要依靠一个中心索引服务器来发现数据。在后一种情况下，系统也不会出现单点崩溃

##### LDAP（轻型目录访问协议）

- 定义：
  - 是一个开放的，中立的，工业标准的应用协议，通过IP协议提供访问控制和维护分布式信息的目录信息
  - 也叫轻量级目录访问协议，是一种访问目录服务的一种协议
  - 目录服务是指网络上存在一种提供相关资源的数据库的服务
- 概述：
  - 鉴于原先的目录访问协议（Directory Access Protocol即DAP）对于简单的互联网客户端使用太复杂，IETF设计并指定LDAP做为使用X.500目录的更好的途径。LDAP在TCP/IP之上定义了一个相对简单的升级和搜索目录的协议

##### CGI（通用网关接口）

- 定义：
  - 在计算机领域，Common Gateway Interface (CGI) 是为了web 服务去执行类似于console application (也可以称作command-line interface programs) 的程序，这种程序是在server上实现 动态页面 提供了一种通用的协议，这样的程序称作 CGI 脚本。重点是这些脚本如何在server上执行。通常情况下，一次请求对应一个CGI 脚本的执行，生成一个 HTML

##### RSS（简易资讯聚合）

- 定义：
  - 中文译作简易资讯聚合[3]，也称聚合内容[4]，是一种消息来源格式规范，用以聚合经常发布更新资料的网站，例如部落格文章、新闻、音讯或视讯的网摘。RSS文件（或称做摘要、网路摘要、或频更新，提供到频道）包含全文或是节录的文字，再加上发布者所订阅之网摘资料和授权的元数据。简单来说 RSS 能够让使用者订阅个人网站个人博客，当订阅的网站有新文章是能够获得通知。

##### 端口转发

- 定义：就是将一台主机的网络端口转发到另外一台主机并由另一台主机提供转发的网络服务

