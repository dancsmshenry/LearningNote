# 作用

- 将ip地址转换为mac地址
- PS：每个设备都会缓存一份ARP缓存表
- PS：ARP是解决同一个局域网的主机或路由器的IP地址和硬件地址的映射问题（这时候就需要局域网中的路由器进行数据的转发）
  - 因此当前主机就将目标ip地址解析为路由器的mac地址







# 过程

- ARP 是借助 ARP 请求与 ARP 响应两种类型的包确定 MAC 地址的



## arp请求

- 当前主机通过广播发送 ARP 请求，ARP请求包中有当前主机想要知道的 MAC 地址的 主机 IP 地址



## arp响应

- 当同个链路中的所有设备收到 ARP 请求时，会去拆开 ARP 请求包⾥的内容
  - 如果 ARP 请求包中的目标 IP 地址与自己的 IP 地址⼀致，那么这个设备就将自己的 MAC 地址塞⼊ ARP 响应包返回给主机
  - 如果当前主机发现ARP请求的不是自己，就将发送者的mac地址缓存到自己的ARP表中，然后再将报文丢弃
- PS：如果找不到



## arp缓存

- 操作系统通常会把第⼀次通过 ARP 获取的 MAC 地址缓存起来，以便下次直接从缓存中找到对应 IP 地址的 MAC 地址
- 不过，MAC 地址的缓存是有⼀定期限的，超过这个期限，缓存的内容将被清除
- ARP缓存表的超时处理
  - ARP是动态处理的，现在总结一下：ARP表项的生存时间是一般为5-10分钟（LwIP中默认是5分钟），而ARP请求的等待时间是5秒钟，当这些时间到达后，就会更新ARP表项，如果在物理链路层无法连通则会删除表项。
  - 因此每个协议栈的实现都必须维护着一个定时器（超时机制）来管理ARP缓存表，在必要的时候更新及删除ARP表项







# 获取方式

- 静态获取：相当于手动配置，ARP表中的地址映射关系全部手动写，如果物理地址发生变化需要手动去更改
- 动态获取；相当于全部都是主机通过协议**自己获取**





# 参考

- 《计算机网络》谢希仁 第四章第二节