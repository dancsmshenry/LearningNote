# Computer Networks Note

- 应用层：HTTP，HTTPS，DNS，DHCP
- 传输层：TCP，UDP
- 网络层：IP，ARP，RARP







###### 基于计网五层模型的理解

- 应用层
  - 即我们使用的应用所在的层级。对于前一层传来的信息（传输层将信息传给应用层），遵循一定的规则（http、https、ftp等协议），然后顺利的基于规则对信息进行加工处理，最后拿给客户端的相关引用程序（浏览器，桌面端应用，app等）渲染
  - 所以我觉得该层级最重要的是要学习有关**https等相关协议**的相关规则，知道应用层是如何对我们的信息进行加工处理的，出现错误时是如何勘误报错的（当然，这对爬虫来说应该是最重要的一个关键点）
  - 相关知识点：
    - 状态码
    - 相关报文的字段
    - get和post请求的区别
    - http的优缺点
    - cookie和session
    - https，ssl（加密方式）
- 传输层
  - 对，可是每个客户端上面都会有很多很多的应用，那该怎么传输数据呢？答案就是引入传输层，ip地址和端口号
  - 那信息到底是如何传递的呢？这里就用两种协议来传输，**tcp和udp**
  - 注：协议其实是对当前的信息进行打包处理，然后利用计网的抽象出来的分层把信息丢给下一层（思想是真的牛皮）
- 网络层
  - 那你把信息给我了，我应该把信息传给你的目的主机是吧，可我能直接到你的目的主机吗？很难的啦，所以一定是要想快递一样的先传给你，再传给你，最后传给你。网络层干的就是这件事情，而这件事就是要依靠**ip协议来进行**
- 数据链路层
  - 那么你都想好了信息是传球一样的传来传去的，那两个人之间是要怎么传输的呢？这就是数据链路层的问题了
- 物理层
  - 脱离抽象，靠近实物的信息传输层面





# 女巫攻击

传统互联网领域

- 模拟出多种身份进行攻击，生活中常见的就是多个ip地址刷流量，刷赞
- 再比如说：电商平台操纵多个消耗刷单，抢购软件冒充多人实施抢购
- 解决办法：采用可靠的第三方进行验证（实名认证）



区块链领域

- 投票时生成多个地址刷票，诸如矿工挖矿的记账权、token空投、DAO决策等等
- 原因：区块链以钱包地址定义为一个用户
- 解决办法：工作量证明、资产证明、行为证明等等



# 12、一个TCP连接可以对应几个HTTP请求？ 

如果维持连接，一个 TCP 连接是可以发送多个 HTTP 请求的。





# 13、一个 TCP 连接中 HTTP 请求发送可以一起发送么（比如一起发三个 请求，再三个响应一起接收）？

- HTTP/1.1 存在一个问题，单个 TCP 连接在同一时刻只能处理一个请求，意思是说：两个请求的生命周 期不能重叠，任意两个 HTTP 请求从开始到结束的时间在同一个 TCP 连接里不能重叠
- 在 HTTP/1.1 存在 Pipelining 技术可以完成这个多个请求同时发送，但是由于浏览器默认关闭，所以可以 认为这是不可行的。在 HTTP2 中由于 Multiplexing 特点的存在，多个 HTTP 请求可以在同一个 TCP 连 接中并行进行。 
- 那么在 HTTP/1.1 时代，浏览器是如何提高页面加载效率的呢？主要有下面两点： 
  - 维持和服务器已经建立的 TCP 连接，在同一连接上顺序处理多个请求。 
  - 和服务器建立多个 TCP 连接。



浏览器对同一 Host 建立 TCP 连接到的数量有没有限制？

- 假设我们还处在 HTTP/1.1 时代，那个时候没有多路传输，当浏览器拿到一个有几十张图片的网页该怎 么办呢？肯定不能只开一个 TCP 连接顺序下载，那样用户肯定等的很难受，但是如果每个图片都开一 个 TCP 连接发 HTTP 请求，那电脑或者服务器都可能受不了，要是有 1000 张图片的话总不能开 1000  个TCP 连接吧，你的电脑同意 NAT 也不一定会同意。 有。Chrome 最多允许对同一个 Host 建立六个 TCP 连接。不同的浏览器有一些区别。 如果图片都是 HTTPS 连接并且在同一个域名下，那么浏览器在 SSL 握手之后会和服务器商量能不能用 HTTP2，如果能的话就使用 Multiplexing 功能在这个连接上进行多路传输。不过也未必会所有挂在这个 域名的资源都会使用一个 TCP 连接去获取，但是可以确定的是 Multiplexing 很可能会被用到。 如果发现用不了 HTTP2 呢？或者用不了 HTTPS（现实中的 HTTP2 都是在 HTTPS 上实现的，所以也就 是只能使用 HTTP/1.1）。那浏览器就会在一个 HOST 上建立多个 TCP 连接，连接数量的最大限制取决 于浏览器设置，这些连接会在空闲的时候被浏览器用来发送新的请求，如果所有的连接都正在发送请求 呢？那其他的请求就只能等等了。