对于客户端

- 1.客户端保存当前已下载文件的位置或大小
- 在下次请求时告诉服务端自己请求的是哪一区间的数据
- 服务端根据请求中的范围，从文件指定位置取出区间范围的数据进行响应
  - 关键问题：上次下载文件跟本次断点续传请求文件不一致（上次断开后，文件数据发生改变）
  - 一旦上次断开后文件数据发生了改变，就算客户端请求的是区间数据，也为了防止数据不一致重新返回完整的文件数据



http实现

- 1.服务端对客户的响应中加：	Accept-Ranges:bytes  	表示自己支持断点续传。
  		同时需要在响应中加入： ETag：“文件唯一标识符”  （判断文件是否发生变化）

  2.客户端在断点续传时，通过字段if-Range：Etag的值，告诉服务端文件是否发生改变，如果没改变则断点续传，改变则下载完整。

  客户端在断点续传时，通过字段Range：bytes=200-1000，2000-3423，5000- 告诉服务器请求那部分数据。如图1：

  3.服务器根据断点续传中的if-Rang 和 Range 字段确定是否可以断点续传，如果可以
  （1）文件没有改变，可以续传，则响应206表示部分传输，并且正文是部分文件数据
  （2）文件改变，不能续传，则响应200表示这是新的下载，下载全部文件数据 

  并且服务器响应中，携带字段Content-Range：bytes 200-1000/78978 表示当前响应数据是那一部分数据（语法如图2）