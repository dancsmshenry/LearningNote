# 第三章

- TCP套接字：两个具有不同源IP地址或源端口号的到达TCP报文段将被定向到两个不同的套接字上
- UDP套接字：如果两个UDP报文段有不同的源IP地址和/或源端口号，但具有相同的目的IP地址和目的端口号，那么这两个报文段将通过相同的目的套接字被定向到相同的目的进程

- 虽然udp不可靠，但是udp就必须再端到端基础上在运输层提供差错检测（即校验和），端到端原则
- arp自动重传请求协议：差错检测，接收方反馈，重传



dns查询

- 主机向本地域名服务一般是采用递归查询
  - 如果主机所询问的本地域名服务器不知道被查询的域名的ip地址，那本地域名服务器就以dns客户的身份，向其它根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。
  - 因此，递归查询返回的查询结果或者是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址
  - 说白了，就是你找我查，我不知道，我就替你去问别人，别人不知道，就代我再去问别人
- 本地域名服务器向根域名服务器的查询时迭代查询
  - 当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的IP地址，要么告诉本地服务器：“你下一步应当向哪一个域名服务器进行查询”。
  - 然后让本地服务器进行后续的查询。根域名服务器通常是把自己知道的顶级域名服务器的IP地址告诉本地域名服务器，让本地域名服务器再向顶级域名服务器查询。
  - 结果：查询ip地址，或告诉本地服务器下一步应当向哪一个权限服务器进行查询
  - 说白了，你找我查，我不知道，但我告诉你谁有可能知道，你去找他



# TCP报文详解

- 源端口和目的端口（16*2位）
- 序号（sequence number）报文段发送的数据的第一个字节的序号
- 确认号（acknowledgement number）期待收到对方的下一个报文段的第一个数据字节
  - 表明到序号N-1的所有数据都已收到
- 数据偏移：TCP报文段的首部长度
- 确认（ACK）仅当为1的时候有效，为0的时候无效，在连接建立后，所有报文段都为1
- 同步（SYN）
  - SYN=1,ACK=0,连接请求
  - SYN=1,ACK=1,连接接受
  - SYN=1表示连接请求，连接接受
- 终止（FIN）释放连接，FIN=1，报文段的发送方的数据发送完毕
- 窗口，作为接收方让发送方设置其发送窗口的一句
- 检验和（伪首部+报文段）
- MSS：每一个TCP报文段中的数据字段的最大长度



# 对拥塞控制和流量控制的理解

- 流量控制
  - 对应的是滑动窗口
  - 接收方与发送方对数据包的处理速度不同
  - 接收方控制，发送方执行
  - 考虑的是端到端的情况
  - 例子：对于接收方来说，数据包太大，缓冲区太多还没有处理好的数据包；发送方收到这个信息以后，就把窗口缩小
  - 感觉流量控制针对的是单个数据包，接收方如果觉得发的太快了，处理不过来，就会告诉发送方，把数据包的大小缩小
- 拥塞控制
  - 拥塞窗口：发送方在一个RTT内可以最多发送的数据包
  - 而拥塞窗口，是针对网络中太过拥挤的时候，就要减少发送数据包的数量，使用慢开始等发送算法







###### 基于计网五层模型的理解

- 应用层
  - 即我们使用的应用所在的层级。对于前一层传来的信息（传输层将信息传给应用层），遵循一定的规则（http、https、ftp等协议），然后顺利的基于规则对信息进行加工处理，最后拿给客户端的相关引用程序（浏览器，桌面端应用，app等）渲染
  - 所以我觉得该层级最重要的是要学习有关**https等相关协议**的相关规则，知道应用层是如何对我们的信息进行加工处理的，出现错误时是如何勘误报错的（当然，这对爬虫来说应该是最重要的一个关键点）
  - 相关知识点：
    - 状态码
    - 相关报文的字段
    - get和post请求的区别
    - http的优缺点
    - cookie和session
    - https，ssl（加密方式）
- 传输层
  - 对，可是每个客户端上面都会有很多很多的应用，那该怎么传输数据呢？答案就是引入传输层，ip地址和端口号
  - 那信息到底是如何传递的呢？这里就用两种协议来传输，**tcp和udp**
  - 注：协议其实是对当前的信息进行打包处理，然后利用计网的抽象出来的分层把信息丢给下一层（思想是真的牛皮）
- 网络层
  - 那你把信息给我了，我应该把信息传给你的目的主机是吧，可我能直接到你的目的主机吗？很难的啦，所以一定是要想快递一样的先传给你，再传给你，最后传给你。网络层干的就是这件事情，而这件事就是要依靠**ip协议来进行**
- 数据链路层
  - 那么你都想好了信息是传球一样的传来传去的，那两个人之间是要怎么传输的呢？这就是数据链路层的问题了
- 物理层
  - 脱离抽象，靠近实物的信息传输层面



#### 第1章 计算机网络和因特网

##### 1.6 面对攻击的网络

- dos攻击
  - 定义：
    - 是指故意的攻击网络协议实现的缺陷或直接通过野蛮手段残忍地耗尽被攻击对象的资源，目的是让目标计算机或网络无法提供正常的服务或资源访问，使目标系统服务系统停止响应甚至崩溃，而在此攻击中并不包括侵入目标服务器或目标网络设备
  - 分类：
    - 带宽攻击
      - ddos
        - 攻击者简单利用工具集合许多的网络带宽来同时对同一个目标发动大量的攻击请求
    - 连通性攻击
    - 弱点攻击
    - 带宽洪泛
    - 连接洪泛
- 僵尸网络
- 坏家伙能够伪装成你信任的人
  - IP哄骗
  - 端点鉴别
- 

