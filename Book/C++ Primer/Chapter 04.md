## 第4章 表达式

### 4.1 基础

- 重载运算符：当运算符作用在类类型的运算对象时，用户可以自行定义其含义
- 左值和右值：
  - `C`：左值**可以**在表达式左边，右值不能
  - `C++`：当一个对象被用作**右值**的时候，用的是对象的**值**（内容）
  - 被用做**左值**时，用的是对象的**身份**（在内存中的位置）



### 4.2算术运算符

```c++
a + b;
a - b;
a * b;

a / b;//代表的是整除，即得到的是一个整数
{
    21 / -5 = -4;
    -21 / -8 = 2;
}

a % b;//求余，注意存在负数的情况
{
    21 % -5 = 1;
    -21 % -8 = -5;
}

+a;//正号
-a;//负号
```



### 4.3 逻辑和关系运算符

```c++
a < b;//小于
a <= b;//小于等于
a > b;//大于
a >= b;//大于等于
a == b;//相等
a != b;//不相等
a && b;//表示逻辑关系中的和，当且仅当二者都为真的时候才为真（所以前面是假的时候就不会继续往下算了）
a || b;//表示逻辑关系中的或，当且仅当二者都为假的时候才为假
! a;//表示逻辑关系中的非，注意只要a不是0，!a一定为假
```



### 4.4 赋值运算符

- 如果赋值运算的左右侧运算对象类型不同，则右侧运算对象将转换成左侧运算对象的类型（参考类型转换）
- 赋值运算符满足右结合律，这点和其他二元运算符不一样。 `ival = jval = 0;`等价于`ival = (jval = 0);`



### 4.5 递增和递减运算符

```c++
a ++;//表示a会先进行部分操作，然后再在原来的基础上加上1
++ b;//表示先让b在原来的基础上加上1，然后再进行操作（优先使用这个，参考原理，迭代器）
a --;//同理
-- b://同理
```



### 4.6 成员访问运算符

```c++
string s1 = "a string", *p = &s1;
auto n = s1.size();//点运算符获取类对象的一个成员
n = (*p).size();//运行p所指对象的size成员
n = p -> size();//与上一句等价
```



### 4.7 条件运算符

```c++
c = (a > b) ? a : b;//等价于一个if语句
```



### 4.8 位运算符

```c++
a = 1;
b = 0;
~a = 0;//位取反符号，先将数值转化为二进制数，然后再全部取反位
a >> 1 = 0;//右移位，先将数值转化为二进制数，然后全体向右边移一位，即除以二
a << 1 = 2;//左移位，先将数值转化为二进制数，然后全体向左边移一位，即乘以二
a & b = 0;//先将数值转化为二进制数，然后按照逻辑关系中的和运算进行比较
a | b = 1;//同理
a ^ b = 1;//同理，不过只有二者不同的时候才会为1
```



### 4.9 sizeof运算符

- 返回一条表达式或一个类型名字所占的字节数，返回的类型是 `size_t`
-  `sizeof (type)`和 `sizeof expr`



### 4.10 逗号运算符



### 4.11 类型转换

- 隐式转换
  - 比 `int`类型小的整数值先提升为较大的整数类型
  - 条件中，非布尔转换成布尔
  - 初始化中，初始值转换成变量的类型
  - 算术运算或者关系运算的运算对象有多种类型，要转换成同一种类型



