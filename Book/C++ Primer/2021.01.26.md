## 第4章 表达式

### 4.1 基础

- 重载运算符：当运算符作用在类类型的运算对象时，用户可以自行定义其含义
- 左值和右值：
  - `C`：左值**可以**在表达式左边，右值不能
  - `C++`：当一个对象被用作**右值**的时候，用的是对象的**值**（内容）
  - 被用做**左值**时，用的是对象的**身份**（在内存中的位置）



### 4.2算术运算符

```c++
a + b;
a - b;
a * b;

a / b;//代表的是整除，即得到的是一个整数
{
    21 / -5 = -4;
    -21 / -8 = 2;
}

a % b;//求余，注意存在负数的情况
{
    21 % -5 = 1;
    -21 % -8 = -5;
}

+a;//正号
-a;//负号
```



### 4.3 逻辑和关系运算符

```c++
a < b;//小于
a <= b;//小于等于
a > b;//大于
a >= b;//大于等于
a == b;//相等
a != b;//不相等
a && b;//表示逻辑关系中的和，当且仅当二者都为真的时候才为真（所以前面是假的时候就不会继续往下算了）
a || b;//表示逻辑关系中的或，当且仅当二者都为假的时候才为假
! a;//表示逻辑关系中的非，注意只要a不是0，!a一定为假
```



### 4.4 赋值运算符

- 如果赋值运算的左右侧运算对象类型不同，则右侧运算对象将转换成左侧运算对象的类型（参考类型转换）
- 赋值运算符满足右结合律，这点和其他二元运算符不一样。 `ival = jval = 0;`等价于`ival = (jval = 0);`



### 4.5 递增和递减运算符

```c++
a ++;//表示a会先进行部分操作，然后再在原来的基础上加上1
++ b;//表示先让b在原来的基础上加上1，然后再进行操作（优先使用这个，参考原理，迭代器）
a --;//同理
-- b://同理
```



### 4.6 成员访问运算符

```c++
string s1 = "a string", *p = &s1;
auto n = s1.size();//点运算符获取类对象的一个成员
n = (*p).size();//运行p所指对象的size成员
n = p -> size();//与上一句等价
```



### 4.7 条件运算符

```c++
c = (a > b) ? a : b;//等价于一个if语句
```



### 4.8 位运算符

```c++
a = 1;
b = 0;
~a = 0;//位取反符号，先将数值转化为二进制数，然后再全部取反位
a >> 1 = 0;//右移位，先将数值转化为二进制数，然后全体向右边移一位，即除以二
a << 1 = 2;//左移位，先将数值转化为二进制数，然后全体向左边移一位，即乘以二
a & b = 0;//先将数值转化为二进制数，然后按照逻辑关系中的和运算进行比较
a | b = 1;//同理
a ^ b = 1;//同理，不过只有二者不同的时候才会为1
```



### 4.9 sizeof运算符

- 返回一条表达式或一个类型名字所占的字节数，返回的类型是 `size_t`
-  `sizeof (type)`和 `sizeof expr`



### 4.10 逗号运算符



### 4.11 类型转换

- 隐式转换
  - 比 `int`类型小的整数值先提升为较大的整数类型
  - 条件中，非布尔转换成布尔
  - 初始化中，初始值转换成变量的类型
  - 算术运算或者关系运算的运算对象有多种类型，要转换成同一种类型



## 第5章 语句

### 5.1 简单语句

- 空语句：只有一个分号

```c++
;
```

- 复合语句块：用花括号 `{}`包裹起来的语句和声明的序列。一个块就是一个作用域

```c++
while (val <= 10){
    sum += val;
    ++ val;
}
```

- 空块

```c++
while (cin >> s && s!= sought){
    
}
```

- 注意：不一定所有的语句都会以分号结尾

```c++
for (int i = 0; i < 100; ++ i){
    i1 = i * i, i2 = i * i * i;
}
```



### 5.2 语句作用域



### 5.3 条件语句

- `if`语句

  - ```c++
    if (val < 0){
        
    }
    else{
        
    }//第一种情况
    
    if (val < 0){
        
    }
    else if (val == 0){
        
    }
    else if (val > 10){
        
    }
    else{
        
    }//第二种情况
    ```

  - 当有多个else和if的时候遵循的规则：else与离它最近的尚未匹配的if匹配

- `switch`语句

  - ```c++
    unsigned a = 0, e = 0, i = 0, o = 0, u = 0;
    char ch;
    while (cin >> vh){
        switch(ch){
            case 'a':
                a ++ ;
                break;
            case 'e':
                e ++ ;
                break;
            case 'i':
                i ++ ;
                break;
            case 'o':
                o ++ ;
                break;
            case 'u':
                u ++ ;
                break;
        }
    }
    ```

  - default标签：如果上面的情况都不符合，就执行这个

    - ```c++
      switch (ch){
          case'a':case 'e':case'i':case'o':case'u':
              ++ vowelCnt;
              break;
          default:
              ++ otherCnt;//当ch不属于aeioou其中的任何一个的时候
              break;
      }
      ```



### 5.4 迭代语句

- while语句

```c++
while (a != 100){
    sum += a;
    ++ a;
}
//()里面的值为布尔值
```

- 传统的for语句

```c++
for (int i = 0; i < 100; i ++ ){
    sum += i;
}
//(, , )三部分组成：声明语句，条件判断语句和操作语句
//这三个语句都可以为空语句
```

- 范围for语句

```c++
vector<int> v = {0, 1, 2, 3, 4}
for (auto &r : v){
    r *= 2;//对于v中的每个元素，都翻倍
}
//等价于
for (auto beg = v.begin(), end = v.end())
```

- do while语句

```c++
do{
    //statement
}
while (condition);
```



### 5.5 跳转语句

- break语句
  - 终止离它最近的while、do while、for或者switch语句，并从这些语句之后的第一条语句执行

- continue语句
  - 终止最近的循环中的当前迭代并立即开始下一次迭代

- goto语句
  - 基本不用这个语句
    - 程序的可读性会被降低（从上往下读，然后还有时不时往回看），同时用不好会使程序逻辑混乱



### 5.6 TRY语句块和异常处理

- throw表达式

  - 异常检测部分使用 `throw`表达式来表示它遇到了无法处理的问题。我们说 `throw`引发 `raise`了异常

  - ```c++
    //首先检查两条语句是否相同
    if (item1.isbn() != item2.isbn())
        throw runtime_error("Data must refer to same ISBN");
    cout << item1 + item2 << endl;
    ```

- try语句块

  - 以 `try`关键词开始，以一个或多个 `catch`字句结束。 `try`语句块中的代码抛出的异常通常会被某个 `catch`捕获并处理。 `catch`子句也被称为异常处理代码

  - ```c++
    try{
        //填写需要测试的语句
    } catch (出现了什么异常){
        //出现该异常后需要执行的操作
    }
    ```

- 标准异常
  - 需要记住一下几个常见的异常处理文件：

    - ```c++
      #include <exception>
      #include <stdexcept>
      #include <new>
      #include <type_info>
      ```





